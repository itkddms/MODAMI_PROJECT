/* ==========================================================================
   1. 폰트 설정 (Font Imports & Definitions)
   ========================================================================== */
@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css");

@font-face {
    font-family: 'NanumBarunGothic';
    font-weight: 400;
    src: url('//fastly.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWeb.eot');
}

@font-face {
    font-family: 'NanumBarunGothic';
    font-weight: 700;
    src: url('//fastly.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.eot');
}

/* ==========================================================================
   2. 전역 스타일 (Global Styles)
   ========================================================================== */
:root {
    --primary--color: #6ABEFE;
    --primary-light--color: #E1F2FF;
    --black--color: #303030;
    --white--color: #FFFFFF;
    --background--color: #F7F7F7;
    --gray100--color: #F4F4F4;
    --gray200--color: #F0F0F0;
    --gray300--color: #E9E9E9;
    --gray400--color: #D6D6D6;
    --gray500--color: #A7A7A7;
    --gray600--color: #3E3E3E;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Pretendard', 'NanumBarunGothic', sans-serif;
}

body {
    background-color: var(--white--color);
    transition: background-color 0.3s ease;
}

button {
    border: none;
    background: transparent;
    padding: 0;
    cursor: pointer;
}

/* ==========================================================================
   3. 레이아웃 및 유틸리티 (Layout & Utilities)
   ========================================================================== */
.hidden {
    display: none;
}

body.step-2-bg {
    background-color: var(--background--color);
}

/* ==========================================================================
   4. 헤더 (Header)
   ========================================================================== */
header {
    width: 100%;
    height: 100px;
    background-color: var(--white--color);
    border-bottom: 1px solid var(--gray200--color);
}

.main_nav {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 90px;
}

:root {
    --primary--color: #6ABEFE;
    /* 메인 컬러 */
    --gray500--color: #A7A7A7;
    /* 회색 500 */
}

.chapter p {
    font-family: 'NanumBarunGothic', sans-serif;
    /* '/3' 부분 폰트 지정 */
    font-size: 32px;
    color: var(--gray500--color);
}

.chapter .current {
    font-family: 'NanumBarunGothic', sans-serif;
    /* 'n' 값에 폰트 직접 지정 */
    color: var(--primary--color);
    margin-right: 4px;
}

/* ==========================================================================
   5. 메인 콘텐츠 (Main Content - Steps)
   ========================================================================== */
.title,
.title_2,
.title_3 {
    margin-top: 64px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    text-align: center;
}

#step2 .hdb {
    margin-top: 94px;
}

.title p,
.title_2 p,
.title_3 p {
    font-size: 28px;
    color: var(--primary--color);
}

.step-content h1 {
    font-size: 48px;
    color: var(--black--color);
    line-height: 140%;
}

.gender_btn {
    display: flex;
    justify-content: center;
    margin-top: 72px;
    gap: 72px;
}

.gender_btn button {
    width: 278px;
    height: 284px;
    background-color: var(--white--color);
    border: 5px solid var(--gray200--color);
    border-radius: 30px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 16px;
    font-size: 36px;
    font-weight: 600;
    color: var(--black--color);
    transition: background-color 0.2s, border-color 0.2s;
}

.gender_btn button.selected {
    background-color: var(--primary-light--color);
    border-color: var(--primary--color);
    color: var(--primary--color);
}

/* ==========================================================================
   6. 버튼 스타일 (Button Styles)
   ========================================================================== */

/* --- 모든 '다음' 버튼의 공통 디자인 --- */
.next_btn,
.record-controls .next-btn {
    width: 162px;
    height: 72px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    color: var(--white--color);
    background-color: var(--primary--color);
    border-radius: 16px;

}

/* --- '다음' 버튼 안의 텍스트 스타일 (공통) --- */
.next_btn,
.btn-next-text {
    font-size: 28px;
    font-weight: 600;
}

/* --- 하단 고정 메인 '다음' 버튼의 *컨테이너* 위치 --- */
.btn_container {
    position: fixed;
    bottom: 50px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
    transition: opacity 0.3s ease;
}

/* 2단계부터는 하단 메인 버튼 숨기기 */
body.step-2-bg .btn_container {
    opacity: 0;
    pointer-events: none;
}

/* ==========================================================================
   7. 녹음 UI (Step 2 & Step 3)
   ========================================================================== */
.interview-answer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 410px;
    background-color: var(--white--color);
    border-radius: 100px 100px 0 0;
    box-shadow: 0 -6px 23.4px 4px rgba(106, 190, 254, 0.05);

    /* ▼▼▼ 내부 요소 정렬 방식 변경 ▼▼▼ */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    /* 위, 아래로 요소를 밀착시킴 */
    padding: 90px 0 64px 0;
    /* 위 90px, 아래 64px 여백을 줌 */
}

.answer-display {
    width: 80%;
    text-align: center;
    font-size: 32px;
    /* 폰트 크기를 32px로 통일 */
    font-weight: 500;
    position: relative;
    /* 자식 요소 위치의 기준점 */
    min-height: 1.5em;
    /* 텍스트가 없을 때 최소 높이 유지 */
}

.guide-text {
    color: var(--gray500--color);
    transition: opacity 0.2s ease-in-out;
    font-weight: 400;
}


.answer-output {
    font-size: 32px;
    font-weight: 400;
    color: var(--black--color);
    line-height: 1.4; /* 140%를 CSS 계산에 용이한 1.4로 표현 */

    /* ▼▼▼ 스크롤 기능 추가 ▼▼▼ */
    max-height: calc(32px * 1.4 * 2); /* (폰트크기 * 줄간격 * 2줄) 높이로 제한 */
    overflow-y: auto;                 /* 내용이 넘치면 세로 스크롤 자동 생성 */
    padding-right: 10px;              /* 스크롤바와 텍스트가 겹치지 않도록 여백 추가 */
    text-align: left;                 /* 긴 텍스트는 왼쪽 정렬이 보기 좋습니다 */
    
    /* 기존 위치 및 보이기/숨기기 스타일 */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
}

/* 버튼 전체 컨테이너: 위치 고정 */
.record-controls {
    /* position: fixed 속성 제거됨! */
    position: relative;
    width: 100%;
    height: 114px;
    /* 버튼 높이만큼 공간 확보 */
    z-index: 100;
}

.center-btn {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 114px;
    height: 114px;
}

.center-btn>button {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    transition: opacity .2s ease, transform .2s ease;
    opacity: 0;
    transform: scale(.9);
    pointer-events: none;
}

/* 녹음 UI '다음' 버튼의 고유 스타일 (위치, 그림자, 보이기/숨기기) */
.record-controls .next-btn {
    position: absolute;
    right: 89px;
    top: 50%;
    transform: translateY(-50%);

    /* 기존 스타일 유지 */
    opacity: 0;
    pointer-events: none;
    transition: opacity .22s ease;
}

/* --- 버튼 상태별 보이기/숨기기 --- */
#answer-step2 .record-btn,
#answer-step3 .record-btn {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
}

#answer-step2.is-recording .record-btn,
#answer-step3.is-recording .record-btn {
    opacity: 0;
    pointer-events: none;
}

#answer-step2.is-recording .stop-btn,
#answer-step3.is-recording .stop-btn {
    opacity: 1;
    pointer-events: auto;
}

#answer-step2.is-recording .guide-text,
#answer-step3.is-recording .guide-text,
#answer-step2.post-record .guide-text,
#answer-step3.post-record .guide-text {
    opacity: 0;
    /* 안내 문구 숨기기 */
}

#answer-step2.is-recording .answer-output,
#answer-step3.is-recording .answer-output,
#answer-step2.post-record .answer-output,
#answer-step3.post-record .answer-output {
    opacity: 1;
    /* 결과 텍스트 보이기 */
}

#answer-step2.post-record .record-btn,
#answer-step3.post-record .record-btn,
#answer-step2.post-record .stop-btn,
#answer-step3.post-record .stop-btn {
    opacity: 0;
    pointer-events: none;
}

#answer-step2.post-record .restart-btn,
#answer-step3.post-record .restart-btn {
    opacity: 1;
    pointer-events: auto;
}

#answer-step2.post-record .next-btn,
#answer-step3.post-record .next-btn {
    opacity: 1;
    pointer-events: auto;
}

#btn-next-step2,
#btn-next-step3 {
    opacity: 1 !important;
    pointer-events: auto !important;
}